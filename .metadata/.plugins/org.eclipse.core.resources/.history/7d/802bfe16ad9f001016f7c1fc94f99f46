package tech.codehunt.service;

import java.io.FileOutputStream;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.multipart.MultipartFile;

import jakarta.transaction.Transactional;
import tech.codehunt.dao.ServiceFormCrud;
import tech.codehunt.model.ServiceForm;

public class ServiceFormServiceImpl implements ServiceFormService {

	
	private ServiceFormCrud serviceFormCrud;
	@Autowired
	public void setServiceFormCrud(ServiceFormCrud serviceFormCrud) {
		this.serviceFormCrud = serviceFormCrud;
	}
  @Transactional(rollbackOn = Exception.class)
	@Override
	public ServiceForm addService(ServiceForm serviceForm, MultipartFile multipartFile) throws Exception {
	
		ServiceForm save=null;
		try {
		 save = serviceFormCrud.save(serviceForm);
		 if(save!=null) {
			
		 String path="C:\\Users\\91752\\Desktop\\TAXI APP\\taxibooking\\src\\main\\resources\\static\\myserviceimg\\"+multipartFile.getOriginalFilename();
		
		byte[] bytes = multipartFile.getBytes();
		
		FileOutputStream fos= new FileOutputStream(path);
		fos.write(bytes);
		
		}
		}
		
		catch (Exception e) {
			save=null;
			
			throw e;
			
		}
		
		return save;
	}

}
